import{_ as g,a as v,c as u,d as l,e as c,f,h as s,g as i,w as p,m as b,j as w,F as y}from"./index-1b2e7ed0.js";v();const V={data(){return{disabled:!0,id:null,avatar:"",firstName:"",lastName:"",username:"",email:"",password:"",errors:[],date:null}},methods:{changeAvatar(){this.avatar=="default_avatar.png"?this.avatar="female_avatar.png":this.avatar="default_avatar.png"},getUserInfo(){u.get("/api/auth/user",{headers:{"Content-Type":"application/json"}}).then(e=>{this.firstName=e.data.first_name,this.lastName=e.data.last_name,this.username=e.data.username,this.email=e.data.email,this.password=e.data.password,this.date=e.data.birthday,this.avatar=e.data.image_path,this.id=e.data.id}).catch(e=>{e.response.status==401||e.response.status==403?this.$router.push("/pages/auth/login"):this.$toast.add({severity:"error",summary:"Error Message",detail:"Something went wrong, please try again later!",life:4e3})})},updateProfile(){this.date=new Date(this.date),u.put("/api/auth/user",{first_name:this.firstName,last_name:this.lastName,username:this.username,email:this.email,password:this.password,birthday:this.date.toISOString().split("T")[0],image_path:this.avatar},{headers:{"Content-Type":"application/json"}}).then(e=>{console.log(e.data),this.disabled=!0,this.toggleSuccessToast()}).catch(e=>{e.response?this.errors=e.response.data.errors:e.request&&(this.errors=["The request was made but no response was received. Please try again later!"]),this.toggleErrorToast()})},toggleSuccessToast(){this.$toast.add({severity:"success",summary:"Success Message",detail:"Profile updated successfully!",life:4e3})},toggleErrorToast(){for(var e=0;e<Object.keys(this.errors).length;e++)this.$toast.add({severity:"error",summary:"Error Message",detail:Object.values(this.errors)[e],life:4e3})}},mounted(){this.getUserInfo()}},x={class:"grid flex align-items-center justify-content-center"},N={class:"col-12 lg:w-11 xl:w-7"},T={class:"surface-section mx-5"},U=s("div",{class:"font-medium text-3xl text-900 mb-3"},"Profile Information",-1),C=s("div",{class:"text-500 text-xl mb-5"},"All of your profile informations at one place.",-1),B={class:"flex justify-content-center"},P={class:"border-circle w-10rem h-10rem m-2 mb-8 flex align-items-center justify-content-center relative"},j=["src"],k={class:"grid"},I={class:"col-12 md:col-6"},S=s("h5",null,"First Name",-1),E={class:"p-inputgroup"},F=s("span",{class:"p-inputgroup-addon"},[s("i",{class:"pi pi-user"})],-1),A={class:"col-12 md:col-6"},M=s("h5",null,"Last Name",-1),O={class:"p-inputgroup"},q=s("span",{class:"p-inputgroup-addon"},[s("i",{class:"pi pi-user"})],-1),L={class:"col-12"},D=s("h5",null,"Username",-1),z={class:"p-inputgroup"},G=s("span",{class:"p-inputgroup-addon"},[s("i",{class:"pi pi-at"})],-1),H={class:"col-12"},J=s("h5",null,"Email",-1),K={class:"p-inputgroup"},Q=s("span",{class:"p-inputgroup-addon"},[s("i",{class:"pi pi-envelope"})],-1),R={class:"col-12"},W=s("h5",null,"Password",-1),X={class:"p-inputgroup"},Y={class:"col-12"},Z=s("h5",null,"Birthday",-1),$={class:"p-inputgroup"},ss=s("span",{class:"p-button-label"},"Update profile",-1),es=s("span",{class:"p-button-label"},"Save changes",-1);function ts(e,t,as,os,a,r){const n=l("Button"),d=l("InputText"),m=l("Password"),h=l("Calendar"),_=l("Toast");return c(),f(y,null,[s("div",x,[s("div",N,[s("div",T,[U,C,s("div",B,[s("div",P,[s("div",null,[s("img",{src:"/demo/images/avatar/"+this.avatar,width:"170",height:"170"},null,8,j)]),i(n,{type:"button",onClick:t[0]||(t[0]=o=>r.changeAvatar()),class:"p-button-primary p-button-rounded absolute bottom-0 right-0",icon:"pi pi-camera",disabled:this.disabled},null,8,["disabled"])])]),s("div",null,[s("div",k,[s("div",I,[S,s("div",E,[F,i(d,{modelValue:a.firstName,"onUpdate:modelValue":t[1]||(t[1]=o=>a.firstName=o),disabled:a.disabled},null,8,["modelValue","disabled"])])]),s("div",A,[M,s("div",O,[q,i(d,{modelValue:a.lastName,"onUpdate:modelValue":t[2]||(t[2]=o=>a.lastName=o),disabled:a.disabled},null,8,["modelValue","disabled"])])]),s("div",L,[D,s("div",z,[G,i(d,{modelValue:a.username,"onUpdate:modelValue":t[3]||(t[3]=o=>a.username=o),disabled:a.disabled},null,8,["modelValue","disabled"])])]),s("div",H,[J,s("div",K,[Q,i(d,{modelValue:a.email,"onUpdate:modelValue":t[4]||(t[4]=o=>a.email=o),disabled:a.disabled},null,8,["modelValue","disabled"])])]),s("div",R,[W,s("div",X,[i(m,{modelValue:a.password,"onUpdate:modelValue":t[5]||(t[5]=o=>a.password=o),disabled:a.disabled},null,8,["modelValue","disabled"])])]),s("div",Y,[Z,s("div",$,[i(h,{showIcon:!0,showButtonBar:!0,disabled:a.disabled,modelValue:a.date,"onUpdate:modelValue":t[6]||(t[6]=o=>a.date=o),dateFormat:"yy/mm/dd"},null,8,["disabled","modelValue"])]),i(n,{onClick:t[7]||(t[7]=o=>this.disabled=!this.disabled),class:"px-4 my-4 shadow-4 hover:shadow-6"},{default:p(()=>[ss]),_:1}),this.disabled?w("",!0):(c(),b(n,{key:0,onClick:t[8]||(t[8]=o=>r.updateProfile()),class:"ml-2 px-4 my-4 shadow-4 hover:shadow-6"},{default:p(()=>[es]),_:1}))])])])])])]),i(_,{position:"top-right"})],64)}const ls=g(V,[["render",ts]]);export{ls as default};
